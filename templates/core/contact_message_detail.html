{% extends 'dashboard_base.html' %}

{% block header_title %}Message Details{% endblock %}
{% block header_subtitle %}From {{ message.name }}{% endblock %}
{% block header_actions %}
    <a href="{% url 'contact_message_list' %}" class="btn btn-outline flex items-center gap-2">
        <span class="material-symbols-outlined">arrow_back</span>
        Back to Messages
    </a>
{% endblock %}

{% block dashboard_content %}
<div class="max-w-3xl mx-auto">
    <div class="bg-surface-dark rounded-2xl border border-border-dark overflow-hidden shadow-sm">
        <div class="p-6 border-b border-border-dark bg-background-dark/50 flex justify-between items-start">
            <div>
                <h2 class="text-xl font-bold text-text-main mb-1">{{ message.subject }}</h2>
                <div class="flex items-center gap-2 text-sm text-text-secondary-dark">
                    <span class="material-symbols-outlined text-base">schedule</span>
                    {{ message.created_at|date:"F d, Y at H:i" }}
                </div>
            </div>
            {% if not message.is_read %}
            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary border border-primary/20">
                New Message
            </span>
            {% endif %}
        </div>
        
        <div class="p-6 border-b border-border-dark">
            <div class="flex items-center gap-4">
                <div class="size-12 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-lg">
                    {{ message.name|first|upper }}
                </div>
                <div>
                    <p class="font-bold text-text-main">{{ message.name }}</p>
                    <a href="mailto:{{ message.email }}" class="text-sm text-primary hover:underline">{{ message.email }}</a>
                </div>
            </div>
        </div>

        <div class="p-8">
            <div class="prose prose-invert max-w-none text-text-main whitespace-pre-wrap">
                {{ message.message }}
            </div>
        </div>

        <div class="p-6 bg-background-dark/50 border-t border-border-dark flex justify-end">
            <a href="mailto:{{ message.email }}?subject=Re: {{ message.subject }}" class="btn btn-primary flex items-center gap-2">
                <span class="material-symbols-outlined">reply</span>
                Reply via Email
            </a>
        </div>
    </div>
</div>
{% endblock %}